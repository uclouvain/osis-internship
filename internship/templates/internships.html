{% extends "layout.html" %}
{% load staticfiles %}
{% load i18n %}

{% comment "License" %}
 * OSIS stands for Open Student Information System. It's an application
 * designed to manage the core business of higher education institutions,
 * such as universities, faculties, institutes and professional schools.
 * The core business involves the administration of students, teachers,
 * courses, programs and so on.
 *
 * Copyright (C) 2015-2016 Université catholique de Louvain (http://www.uclouvain.be)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * A copy of this license - GNU General Public License - is available
 * at the root of the source code of this program.  If not,
 * see http://www.gnu.org/licenses/.
{% endcomment %}

{% block breadcrumb %}
  <li><a href="{% url 'studies' %}">{% trans 'Studies' %}</a></li>
  <li><a href="{% url 'internships_home' %}">Stages</a></li>
  <li class="active">{% trans 'Internships' %}</li>
{% endblock %}
{% block content %}
  <div class="page-header">
    <h2>{% trans 'Internships' %}</h2>
  </div>
  <table style="height:100%; width:100%;">
      <thead>
        <tr>
            <th style="text-align:center; width:50%;">{% trans 'Organization' %}</th>
        </tr>
      </thead>
      <tbody>
        <form action="{%url 'internships' %}" method="get">
          <tr>
            <td style="text-align:center; width:50%;">
              <select name="organization_sort" onChange="javascript: this.form.submit();">
               <option value="0">{% trans 'choose_a_hospital' %}</option>
               {% for organization in all_organizations %}
                  <option value="{{ organization.name }}"
                  {% if organization.name == organization_sort_value %}selected{% endif %}>
                      {{ organization.reference }} - {{ organization.name }}
                  </option>
               {% endfor %}
              </select>
            </td>
          </tr>
        </form>
      </tbody>
  </table>
  <div class="panel panel-default">
    <div class="panel-body">
        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#tab_MI">{% trans 'Stage en Chirurgie'%}</a></li>
            <li><a data-toggle="tab" href="#tab_CH">{% trans 'Stage en Gériatrie'%}</a></li>
            <li><a data-toggle="tab" href="#tab_GO">{% trans 'Stage de Gynécologie-Obstétrique'%}</a></li>
            <li><a data-toggle="tab" href="#tab_PED">{% trans 'Stage en Médecine interne'%}</a></li>
            <li><a data-toggle="tab" href="#tab_URG">{% trans 'Stage en Pédiatrie'%}</a></li>
            <li><a data-toggle="tab" href="#tab_GER">{% trans 'Stage en Urgence'%}</a></li>
            <li><a data-toggle="tab" href="#tab_CHOIX1">{% trans 'Stage au choix'%}</a></li>
        </ul>
        <input type="hidden" name="organization_sort" value="{{ organization.name }}"/>
        {% csrf_token %}
        <div class="tab-content">
            <div id="tab_MI" class="tab-pane fade in active">
              <div class="panel panel-default">
                <div class="tab-content">
                  <div role="tabpanel" class="tab-pane fade in active" id="profile">
                    <table class="table table-hover">
                        <thead>
                          <tr>
                            <th align="center">{% trans 'organization' %}</th>
                            <th align="center">{% trans 'student_max' %}</th>
                            <th align="center">{% trans 'Nombre de 1er choix' %}</th>
                            <th align="center">{% trans 'Nombre d\'autres choix fait' %}</th>
                            <th align="center">{% trans 'Détails' %}</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for internship in all_internships %}
                          {% if internship.learning_unit_year.title = "Stage en Chirurgie"%}
                            <tr>
                              <td>
                                {{ internship.organization.reference }} - {{ internship.organization }}
                              </td>
                              <td align="center">
                                {{ internship.maximum_enrollments }}
                              </td>
                              <td align="center">
                                {{ internship.number_first_choice }}
                              </td>
                              <td align="center">
                                {{ internship.number_other_choice }}
                              </td>
                              <td align="center">
                                <a class="btn btn-primary" target="_blank" id="lnk_students_choice{{internship.id}}"
                                  href="{% url 'internship_detail_student_choice' internship.id %}">
                                  <span class="glyphicon glyphicon-search" aria-hidden="true">
                                  </span>
                                </a>
                              </td>
                            </tr>
                          {% endif %}
                          {% endfor %}
                        </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div id="tab_CH" class="tab-pane fade">
              <div class="panel panel-default">
                <div class="tab-content">
                  <div role="tabpanel" class="tab-pane fade in active" id="profile">
                    <table class="table table-hover">
                        <thead>
                          <tr>
                            <th align="center">{% trans 'organization' %}</th>
                            <th align="center">{% trans 'student_max' %}</th>
                            <th align="center">{% trans 'Nombre de 1er choix' %}</th>
                            <th align="center">{% trans 'Nombre d\'autres choix fait' %}</th>
                            <th align="center">{% trans 'Détails' %}</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for internship in all_internships %}
                          {% if internship.learning_unit_year.title = "Stage en Gériatrie"%}
                            <tr>
                              <td>
                                {{ internship.organization.reference }} - {{ internship.organization }}
                              </td>
                              <td align="center">
                                {{ internship.maximum_enrollments }}
                              </td>
                              <td align="center">
                                {{ internship.number_first_choice }}
                              </td>
                              <td align="center">
                                {{ internship.number_other_choice }}
                              </td>
                              <td align="center">
                                <a class="btn btn-primary" target="_blank" id="lnk_students_choice{{internship.id}}"
                                  href="{% url 'internship_detail_student_choice' internship.id %}">
                                  <span class="glyphicon glyphicon-search" aria-hidden="true">
                                  </span>
                                </a>
                              </td>
                            </tr>
                          {% endif %}
                          {% endfor %}
                        </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div id="tab_GO" class="tab-pane fade">
              <div class="panel panel-default">
                <div class="tab-content">
                  <div role="tabpanel" class="tab-pane fade in active" id="profile">
                    <table class="table table-hover">
                        <thead>
                          <tr>
                            <th align="center">{% trans 'organization' %}</th>
                            <th align="center">{% trans 'student_max' %}</th>
                            <th align="center">{% trans 'Nombre de 1er choix' %}</th>
                            <th align="center">{% trans 'Nombre d\'autres choix fait' %}</th>
                            <th align="center">{% trans 'Détails' %}</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for internship in all_internships %}
                          {% if internship.learning_unit_year.title = "Stage de Gynécologie-Obstétrique"%}
                            <tr>
                              <td>
                                {{ internship.organization.reference }} - {{ internship.organization }}
                              </td>
                              <td align="center">
                                {{ internship.maximum_enrollments }}
                              </td>
                              <td align="center">
                                {{ internship.number_first_choice }}
                              </td>
                              <td align="center">
                                {{ internship.number_other_choice }}
                              </td>
                              <td align="center">
                                <a class="btn btn-primary" target="_blank" id="lnk_students_choice{{internship.id}}"
                                  href="{% url 'internship_detail_student_choice' internship.id %}">
                                  <span class="glyphicon glyphicon-search" aria-hidden="true">
                                  </span>
                                </a>
                              </td>
                            </tr>
                          {% endif %}
                          {% endfor %}
                        </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div id="tab_PED" class="tab-pane fade">
              <div class="panel panel-default">
                <div class="tab-content">
                  <div role="tabpanel" class="tab-pane fade in active" id="profile">
                    <table class="table table-hover">
                        <thead>
                          <tr>
                            <th align="center">{% trans 'organization' %}</th>
                            <th align="center">{% trans 'student_max' %}</th>
                            <th align="center">{% trans 'Nombre de 1er choix' %}</th>
                            <th align="center">{% trans 'Nombre d\'autres choix fait' %}</th>
                            <th align="center">{% trans 'Détails' %}</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for internship in all_internships %}
                          {% if internship.learning_unit_year.title = "Stage en Médecine interne"%}
                            <tr>
                              <td>
                                {{ internship.organization.reference }} - {{ internship.organization }}
                              </td>
                              <td align="center">
                                {{ internship.maximum_enrollments }}
                              </td>
                              <td align="center">
                                {{ internship.number_first_choice }}
                              </td>
                              <td align="center">
                                {{ internship.number_other_choice }}
                              </td>
                              <td align="center">
                                <a class="btn btn-primary" target="_blank" id="lnk_students_choice{{internship.id}}"
                                  href="{% url 'internship_detail_student_choice' internship.id %}">
                                  <span class="glyphicon glyphicon-search" aria-hidden="true">
                                  </span>
                                </a>
                              </td>
                            </tr>
                          {% endif %}
                          {% endfor %}
                        </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div id="tab_URG" class="tab-pane fade">
              <div class="panel panel-default">
                <div class="tab-content">
                  <div role="tabpanel" class="tab-pane fade in active" id="profile">
                    <table class="table table-hover">
                        <thead>
                          <tr>
                            <th align="center">{% trans 'organization' %}</th>
                            <th align="center">{% trans 'student_max' %}</th>
                            <th align="center">{% trans 'Nombre de 1er choix' %}</th>
                            <th align="center">{% trans 'Nombre d\'autres choix fait' %}</th>
                            <th align="center">{% trans 'Détails' %}</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for internship in all_internships %}
                          {% if internship.learning_unit_year.title = "Stage en Pédiatrie"%}
                            <tr>
                              <td>
                                {{ internship.organization.reference }} - {{ internship.organization }}
                              </td>
                              <td align="center">
                                {{ internship.maximum_enrollments }}
                              </td>
                              <td align="center">
                                {{ internship.number_first_choice }}
                              </td>
                              <td align="center">
                                {{ internship.number_other_choice }}
                              </td>
                              <td align="center">
                                <a class="btn btn-primary" target="_blank" id="lnk_students_choice{{internship.id}}"
                                  href="{% url 'internship_detail_student_choice' internship.id %}">
                                  <span class="glyphicon glyphicon-search" aria-hidden="true">
                                  </span>
                                </a>
                              </td>
                            </tr>
                          {% endif %}
                          {% endfor %}
                        </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div id="tab_GER" class="tab-pane fade">
              <div class="panel panel-default">
                <div class="tab-content">
                  <div role="tabpanel" class="tab-pane fade in active" id="profile">
                    <table class="table table-hover">
                        <thead>
                          <tr>
                            <th align="center">{% trans 'organization' %}</th>
                            <th align="center">{% trans 'student_max' %}</th>
                            <th align="center">{% trans 'Nombre de 1er choix' %}</th>
                            <th align="center">{% trans 'Nombre d\'autres choix fait' %}</th>
                            <th align="center">{% trans 'Détails' %}</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for internship in all_internships %}
                          {% if internship.learning_unit_year.title = "Stage en Urgence"%}
                            <tr>
                              <td>
                                {{ internship.organization.reference }} - {{ internship.organization }}
                              </td>
                              <td align="center">
                                {{ internship.maximum_enrollments }}
                              </td>
                              <td align="center">
                                {{ internship.number_first_choice }}
                              </td>
                              <td align="center">
                                {{ internship.number_other_choice }}
                              </td>
                              <td align="center">
                                <a class="btn btn-primary" target="_blank" id="lnk_students_choice{{internship.id}}"
                                  href="{% url 'internship_detail_student_choice' internship.id %}">
                                  <span class="glyphicon glyphicon-search" aria-hidden="true">
                                  </span>
                                </a>
                              </td>
                            </tr>
                          {% endif %}
                          {% endfor %}
                        </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div id="tab_CHOIX1" class="tab-pane fade">
              <div class="panel panel-default">
                <div class="tab-content">
                  <div role="tabpanel" class="tab-pane fade in active" id="profile">
                    <table class="table table-hover">
                        <thead>
                          <tr>
                            <th align="center">{% trans 'organization' %}</th>
                            <th align="center">{% trans 'student_max' %}</th>
                            <th align="center">{% trans 'Nombre de 1er choix' %}</th>
                            <th align="center">{% trans 'Nombre d\'autres choix fait' %}</th>
                            <th align="center">{% trans 'Détails' %}</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for internship in all_internships %}
                          {% if internship.learning_unit_year.title = "Stage au choix"%}
                            <tr>
                              <td>
                                {{ internship.organization.reference }} - {{ internship.organization }}
                              </td>
                              <td align="center">
                                {{ internship.maximum_enrollments }}
                              </td>
                              <td align="center">
                                {{ internship.number_first_choice }}
                              </td>
                              <td align="center">
                                {{ internship.number_other_choice }}
                              </td>
                              <td align="center">
                                <a class="btn btn-primary" target="_blank" id="lnk_students_choice{{internship.id}}"
                                  href="{% url 'internship_detail_student_choice' internship.id %}">
                                  <span class="glyphicon glyphicon-search" aria-hidden="true">
                                  </span>
                                </a>
                              </td>
                            </tr>
                          {% endif %}
                          {% endfor %}
                        </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
  </div>
  <a href="{% url 'internships_create' %}" id="lnk_organization_create" class="btn btn-default"
     role="button" title="{% trans 'create_an_organization'%}">{% trans 'Ajouter un stage' %}
     <span class="glyphicon glyphicon-plus" aria-hidden="true"></span></a>
{% endblock %}
